## 什么是GitOps？

GitOps是一种持续交付的方式。它的核心思想是将应用系统的声明性基础架构和应用程序存放在Git版本库中。

将Git作为交付流水线的核心，每个开发人员都可以提交拉取请求（Pull Request）并使用Gi​​t来加速和简化Kubernetes的应用程序部署和运维任务。通过使用像Git这样的简单工具，开发人员可以更高效地将注意力集中在创建新功能而不是运维相关任务上（例如，应用系统安装、配置、迁移等）。

* GitOps：集群管理和应用分发的持续交付方式
* 使用 Git 作为信任源，保存声明式基础架构（declarative infrastructure）
  和应用程序
* 以 Git 作为交付过程（pipeline）的中心
* 开发者只需要通过 pull request 完成应用的部署和运维任务
* 优势：
   提高生产率、改进开发体验、一致性和标准化、安全

## GitOps的基本原则

以下是在云原生环境中GitOps的原则：

* 任何能够被描述的内容都必须存储在Git库中

通过使用Git作为存储声明性基础架构和应用程序代码的存储仓库，可以方便地监控集群，以及检查比较实际环境的状态与代码库上的状态是否一致。所以，**我们的目标是描述系统相关的所有内容：策略，代码，配置，甚至监控事件和版本控制等**，并且将这些内容全部存储在版本库中，在通过版本库中的内容构建系统的基础架构或者应用程序的时候，如果没有成功，则可以迅速的回滚，并且重新来过。

* 不应直接使用Kubectl

作为一般规则，不提倡在命令行中直接使用kubectl命令操作执行部署基础架构或应用程序到集群中。还有一些开发者使用CI工具驱动应用程序的部署，但如果这样做，可能会给生产环境带来潜在不可预测的风险。

* 调用Kubernetes 的API的接口或者控制器应该遵循 Operator 模式

调用Kubernetes 的API的接口或者控制器应该遵循 Operator 模式（[什么是Operator 模式？](https://link.zhihu.com/?target=https%3A//coreos.com/blog/introducing-operators.html)），集群的状态和Git库中的配置文件等要保持一致，并且查看分析它们之间的状态差异。





